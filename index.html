<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>メダカの餌一覧</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  margin: 20px;
}

.info-col {
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-width: 980px;
}

details {
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 8px 12px;
  background: #fafafa;
}

summary {
  font-weight: bold;
  cursor: pointer;
}

#table-wrap {
  margin-top: 16px;
  overflow-x: auto;
  max-width: 100%;
}

table {
  border-collapse: collapse;
  width: 100%;
  min-width: 900px;
}

th, td {
  border: 1px solid #ccc;
  padding: 6px 8px;
  white-space: nowrap;
}

th {
  background: #f0f0f0;
}
</style>
</head>

<body>

<h1>メダカの餌一覧</h1>

<div class="info-col">
  <details>
    <summary>使い方（開く）</summary>
    <ul>
      <li>列名クリックでソート</li>
      <li>Ctrl + F で検索</li>
    </ul>
  </details>

  <details>
    <summary>分類について（開く）</summary>
    <ul>
      <li><b>主食</b>：日常ローテーションの軸</li>
      <li><b>育成</b>：稚魚〜成長期向け</li>
      <li><b>産卵</b>：繁殖期のコンディション用</li>
      <li><b>機能</b>：色揚げ・消化など</li>
      <li><b>補助</b>：留守時など</li>
    </ul>
  </details>
</div>

<div id="table-wrap">
  <table id="data-table"></table>
</div>

<script>
/* ★ ここが最重要：GitHub Pages 用の絶対URL */
const CSV_URL =
  "https://tabugon-medaka.github.io/medaka-feed-list/deta.csv";

fetch(CSV_URL)
  .then(res => res.text())
  .then(text => {
    const rows = text.trim().split("\n").map(r => r.split(","));
    const table = document.getElementById("data-table");

    rows.forEach((row, i) => {
      const tr = document.createElement("tr");
      row.forEach(cell => {
        const el = document.createElement(i === 0 ? "th" : "td");
        el.textContent = cell;
        tr.appendChild(el);
      });
      table.appendChild(tr);
    });
  })
  .catch(err => {
    document.body.insertAdjacentHTML(
      "beforeend",
      "<p>CSVの読み込みに失敗しました</p>"
    );
    console.error(err);
  });
</script>

</body>
</html>
